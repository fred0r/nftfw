.\" Automatically generated by Pandoc 2.2.1
.\"
.TH "NFTFWADM" "1" "" "" "Nftfw documentation"
.hy
.SH NAME
.PP
\f[B]nftfwadm\f[] \- support for installation of the Nftfw firewall
generator
.SH SYNOPSIS
.PP
\f[B]nftfwadm\f[] [\f[B]\-h\f[]] [\f[B]\-c\f[] \f[I]config\f[]]
[\f[B]\-o\f[] \f[I]option\f[]] [\f[B]\-x | \-f | \-i | \-q | \-v \f[]]
[\f[B]\f[BI]save|restore|clean\f[B]\f[]]
.SH DESCRIPTION
.PP
\f[B]nftfw(1)\f[] generates firewalls based on information derived from
control files.
It creates a new set of command files ready for loading in the kernel
and tests them using \f[I]nft(1)\f[].
If the test succeeds, it makes a backup of the kernel settings before
installing the new rule set into the kernel.
If installation fails, \f[B]nftfw\f[] loads the kernel tables from the
backup and deletes it, restoring the running system to the known safe
version.
\f[B]nftfw\f[] deletes the backup file if installation succeeds.
.PP
When testing a new firewall setup, it can be useful to be able to
backtrack to a known working version, so \f[B]nftfw\f[] will not create
a new backup file if one already exists.
The \f[B]nftfwadm\f[] command provides the \f[B]save\f[] action to
preload the backup file so that \f[B]nftfw\f[] can revert to a known
working version on any failure.
The \f[B]restore\f[] action reloads the saved backup settings into the
kernel and deletes the backup file.
The \f[B]clean\f[] command deletes the backup file.
.PP
These are the available options to the program:
.TP
.B \f[B]\-h\f[], \f[B]\-\-help\f[]
Prints brief usage information.
.RS
.RE
.TP
.B \f[B]\-c\f[], \f[B]\-\-config\f[] CONFIG
Supply a alternate configuration file, overriding any values from the
default system settings.
.RS
.RE
.TP
.B \f[B]\-i\f[], \f[B]\-\-info\f[]
List all the configuration names and settings
.RS
.RE
.TP
.B \f[B]\-o\f[], \f[B]\-\-option\f[] OPTION
OPTION is keyword=value and may be comma separated list of configuration
options.
The values override any settings in the configuration file.
.RS
.RE
.TP
.B \f[B]\-q\f[], \f[B]\-\-quiet\f[]
Suppress printing of errors and information messages to the terminal,
syslog output remains active.
Terminal output is suppressed when the output is not directed to a
terminal
.RS
.RE
.TP
.B \f[B]\-v\f[], \f[B]\-\-verbose\f[]
Change the default logging settings to INFO to show all errors and
information messages.
.RS
.RE
.SH FILES
.PP
Files can be located in \f[I]/\f[] or \f[I]/usr/local\f[].
.TP
.B \f[I]/usr/local/etc/nftfw\f[]
Location of control files.
.RS
.RE
.TP
.B \f[I]/usr/local/var/lib/nftfw/\f[]
Location of the backup file, \f[I]build.d\f[], \f[I]test.d\f[],
\f[I]install.d\f[], lock files and the sqlite3 databases storing file
positions and blacklist information
.RS
.RE
.SH BUGS
.PP
See GitHub Issues: <https://github.com/pcollinson/nftfw/issues>
.SH AUTHOR
.PP
Peter Collinson (huge credit to the ideas from Patrick Cherry's work for
the firewall for the Symbiosis hosting system).
.SH SEE ALSO
.PP
\f[B]nft(1)\f[], \f[B]nftfwls(1)\f[], \f[B]nftfwedit(1)\f[],
\f[B]nftfw\-config(5)\f[], \f[B]nftfw\-files(5)\f[]
